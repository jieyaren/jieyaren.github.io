---
layout: post
title: python 开发用到的库踩到的坑
category: [debug]
tags: [python, yaml]
---
{% include JB/setup %}

---

[toc]

- pyyaml会有特殊的字符串转换，比如把yes转换成true，所以必须要把yes用引号括起来，或者定制yaml的构造函数，定制resolver，见参考链接的做法。
  - 修改意见：主动引号括起来。或者换名字。定制resolver杀鸡牛刀
- pyyaml对于一些key会加引号，当初由于上层应用不是标准yaml库解析，不能解析引号，所以采用了ruamel.yaml这个库，设置指定的dumper可以让字段不带引号，但是这个库的实现有很大问题，建议别用，而且你能搜到该库作者的很多SO网站回答推广，真有你的啊
  - 不要用，出来混早晚要还的。千万别取巧
- eventlet 0.25版本，会依赖dnspython库，这个库不能用2.0版本，接口不兼容
  - 解决方法 固定dnspython在1.16或者升级eventlet到0.25.2以上



### ref

- https://stackoverflow.com/questions/34282703/yes-or-no-dumping-as-yes-or-no-in-pyyaml
- https://github.com/eventlet/eventlet/issues/619



---

Any advice mailto:wanghenshui@qq.com, thanks! 

Pulling a [issue](https://github.com/wanghenshui/wanghenshui.github.io/issues/new) is fine! I can get noticed from email.

看到这里或许你有建议或者疑问或者指出我的错误，我的邮箱wanghenshui@qq.com 先谢指教。或者到博客上提[issue](https://github.com/wanghenshui/wanghenshui.github.io/issues/new) 我能收到邮件提醒。